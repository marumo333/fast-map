# 有料・無料ルート選択＆再提案マップアプリ（PoC版）

## 1. 目的・背景
毎日の車通勤において、既存のナビアプリでは渋滞・事故情報の反映が遅かったり、有料道路を避けたいニーズに対応しきれていない。本プロダクトは、リアルタイム交通情報を用いて「有料／無料のルート選択」と「柔軟な再ルート提案」を実現することで、ユーザーが状況に応じて納得のいく移動ができることを目的とする。

## 2. 想定ユーザー
- 平日車通勤する会社員（例：30〜50代の郊外在住者）
- 有料道路を極力避けたいが、渋滞での時間ロスも気にしている層

## 3. 解決する課題
- 有料道路を使うかどうかが一目で分からない
- 渋滞や事故が発生しても、即時反映されない
- 渋滞が解消しても、元ルートに戻れない

## 4. 解決策（提供価値）
- 出発前に「最短／迂回」ルートの2択を提示
- 渋滞／事故の発生・解消時に、ルートを再提案
- UIは簡潔にし、直感的な操作でルート選択・変更が可能

## 5. ユーザーストーリー
### ストーリー①：出発前にルート選択
- 目的地入力 → 有料／無料ルートと料金・所要時間を提示 → ユーザーが選択 → 案内開始

### ストーリー②：走行中に渋滞発生
- リアルタイムで渋滞を検知 → 迂回ルート提示 → ユーザーが選択して切り替え

### ストーリー③：渋滞解消後の復帰提案
- 元ルートの渋滞が解消されたと判断 → 復帰ルートを提示 → 任意で切り替え

## 6. 機能要件

| 機能 | Must | Nice to have |
|------|------|--------------|
| 地図表示・ルート提示 | Google Maps APIでの2ルート表示（有料・無料） | 時間差分グラフ表示 |
| 交通情報取得 | 渋滞・事故情報を30〜60秒ごとに取得 | リアルタイムPush通知 |
| 再ルート提案 | 状態変化（渋滞・事故発生／解消）時のみ提案 | 音声通知、履歴保存 |
| UI/UX | ボタン1クリックでルート切替 | モバイル対応の簡易UI |

## 7. 非機能要件（モバイル対応を強化）
- モバイルブラウザでの快適な操作性を重視（レスポンシブ対応）
  - スマホ画面（幅360px〜）でもPC同等に情報把握・操作可能なUI設計
  - タップ操作前提のボタンサイズ・要素配置とする（高さ44px以上）
  - 地図は全画面表示し、UIはオーバーレイ式で表示
- データはクライアント側のみで処理（PoC段階）
- 無料API枠内での運用（Google Maps等）

## 8. 検証計画（PoC）
- 目的：UIの理解しやすさ／ルート提案の納得感
- 検証方法：3〜5人にURL共有し操作 → Googleフォームでヒアリング
- 指標：
  - 「初見で迷わず使えたか」：Yes/No
  - 「ルート提案に納得できたか」：5段階評価
  - 「再提案のタイミングは適切だったか」：5段階評価

## 9. 工程（目安）

| 項目 | 工数感 | 備考 |
|------|--------|------|
| UIモック作成 | 1日 | モバイル優先設計で実装 |
| ルート取得＆表示 | 2日 | Google Maps API連携 |
| 交通情報取得＆再提案 | 1日 | 状態変化検知方式で構成 |
| テスト＆デプロイ | 0.5日 | Vercelで無料公開 |
| **合計** | **4〜5日** | 個人開発で十分可能 |

## 10. 画面仕様（ワイヤーフレームベース）

| 画面 | 機能概要 | UI要素 |
|------|----------|--------|
| トップ画面 | 出発地・目的地入力、ルート表示画面に遷移 | フォーム入力／「ルートを検索」ボタン |
| ルート選択画面 | 有料／無料ルートの2択表示、選択して案内開始 | Google Map表示／ルート情報カード（料金・所要時間）／「このルートで進む」ボタン |
| ナビゲーション画面 | 現在位置の追跡、リアルタイム交通情報の取得、再提案の表示 | 地図／現在位置アイコン／通知バナーまたはポップアップ／ルート切替ボタン |
| 終了画面（任意） | フィードバック誘導 | 「この体験はどうだったか？」などの簡易アンケートリンク |

## 11. 機能仕様（PoCバージョン）

| 機能カテゴリ | 機能名 | 詳細 |
|--------------|--------|------|
| 地図連携 | 地図の表示 | Google Maps APIを用い、初期位置を現在地で表示 |
| ルート検索 | 有料・無料ルート算出 | 目的地入力後に2ルート（有料含む／非有料）を並列提示 |
| ルート情報表示 | 料金・所要時間の表示 | 各ルートに対し料金・時間を明示、カード型UIで表示 |
| 案内開始 | ルート案内モード | 選択されたルートに基づき、現在位置を追跡し地図を更新 |
| 状況取得 | 渋滞・事故情報取得（Polling） | 30〜60秒ごとに外部APIから最新の交通情報を取得 |
| ルート再提案 | 直前の情報と比較し、状態変化が検出された場合のみ再提案を行う（例：新たな渋滞発生、解消、所要時間の大幅変化など） |
| UI補助 | ルート切替通知 | 再提案時にバナー・ポップアップで通知、選択可 |

</rewritten_file> 
